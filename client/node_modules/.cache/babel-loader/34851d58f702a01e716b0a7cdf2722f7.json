{"ast":null,"code":"var _jsxFileName = \"/Users/jaleelbennett/Documents/Projects/Block Watch - YT Watch Party/Youtube-Watch-Party/client/src/context/ConversationContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useContext, useState, createContext, useRef, useEffect } from 'react';\nimport { ParticipantContext } from './ParticipantContext';\nimport { useSocketContext } from './SocketContext'; // import io from 'socket.io-client';\n// const socket = io.connect('http://localhost:4000');\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ConversationPropsContext = /*#__PURE__*/createContext();\nexport function useConversationContext() {\n  _s();\n\n  return useContext(ConversationPropsContext);\n}\n\n_s(useConversationContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\n;\nexport function ConversationPropsProvider(_ref) {\n  _s2();\n\n  let {\n    children\n  } = _ref;\n  const socket = useSocketContext();\n  const [showChat, setShowChat] = useState(true);\n  const [messages, setMessages] = useState([]);\n  const [userMessage, setUserMessage] = useState('');\n  const {\n    name\n  } = useContext(ParticipantContext);\n  const inputRef = useRef(null);\n\n  const getUserInput = e => setUserMessage(e.target.value);\n\n  const addSystemMessage = async message => {\n    if (message) {\n      //displays message for all users\n      setMessages([...messages, message]);\n    }\n  };\n\n  const addUserMessage = async messageData => {\n    if (messageData) {\n      //displays message for all users\n      setMessages([...messages, messageData]);\n    }\n  };\n\n  const emitMessage = async () => {\n    if (userMessage !== '') {\n      const messageData = {\n        sender: name,\n        message: userMessage\n      }; //sends message to server\n\n      socket.emit('chat_message', messageData);\n    }\n\n    setUserMessage('');\n    inputRef.current.value = \"\";\n  };\n\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('system_message', message => {\n      // setMessages([ ...messages, message ])\n      addSystemMessage(message);\n    });\n    socket.on(\"receive_chat_message\", data => {\n      addUserMessage(data);\n    });\n    socket.on(\"user_connected\", name => {\n      addSystemMessage(`${name} has joined the party`);\n    });\n    return () => {\n      socket.off('recieve_message');\n      socket.off('system_message');\n      socket.off('user_connected');\n    };\n  }, [socket]);\n  const conversationProps = {\n    showChat,\n    setShowChat,\n    messages,\n    setMessages,\n    userMessage,\n    setUserMessage,\n    emitMessage,\n    addUserMessage,\n    addSystemMessage,\n    inputRef,\n    getUserInput //socket\n\n  };\n  return /*#__PURE__*/_jsxDEV(ConversationPropsContext.Provider, {\n    value: {\n      conversationProps\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(ConversationPropsProvider, \"1EfnsVzAIu5tU6QmL7Pi+8Ckn1w=\", false, function () {\n  return [useSocketContext];\n});\n\n_c = ConversationPropsProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConversationPropsProvider\");","map":{"version":3,"names":["useContext","useState","createContext","useRef","useEffect","ParticipantContext","useSocketContext","ConversationPropsContext","useConversationContext","ConversationPropsProvider","children","socket","showChat","setShowChat","messages","setMessages","userMessage","setUserMessage","name","inputRef","getUserInput","e","target","value","addSystemMessage","message","addUserMessage","messageData","emitMessage","sender","emit","current","on","data","off","conversationProps"],"sources":["/Users/jaleelbennett/Documents/Projects/Block Watch - YT Watch Party/Youtube-Watch-Party/client/src/context/ConversationContext.js"],"sourcesContent":["import {useContext, useState, createContext, useRef, useEffect} from 'react';\nimport { ParticipantContext } from './ParticipantContext';\nimport { useSocketContext } from './SocketContext';\n// import io from 'socket.io-client';\n\n// const socket = io.connect('http://localhost:4000');\n\n\nconst ConversationPropsContext = createContext();\n\nexport function useConversationContext(){\n    return useContext(ConversationPropsContext)\n};\n\nexport function ConversationPropsProvider({children}){\n\n    const socket = useSocketContext();\n\n    const [showChat, setShowChat] = useState(true);\n\n    const [ messages, setMessages ] = useState([]);\n    const [ userMessage, setUserMessage ] = useState('');\n\n    const {name} = useContext(ParticipantContext);\n\n    const inputRef = useRef(null);\n    \n    const getUserInput = (e) => setUserMessage(e.target.value);\n\n    const addSystemMessage = async (message) => {   \n        if(message){\n          //displays message for all users\n          setMessages([\n            ...messages, message\n          ])\n        }\n    };\n\n    const addUserMessage = async (messageData) => {   \n        if(messageData){\n          //displays message for all users\n          setMessages([\n            ...messages, messageData\n          ])\n        }\n    };\n\n    const emitMessage = async() => {\n    \n        if(userMessage !== ''){\n\n            const messageData = {\n                sender: name,\n                message: userMessage\n            }\n\n            //sends message to server\n            socket.emit('chat_message', messageData);\n        }\n\n        setUserMessage('');\n        inputRef.current.value = \"\";\n        \n    };\n\n    useEffect(()=>{\n\n        if(!socket) return;\n\n        socket.on('system_message', (message)=>{\n            // setMessages([ ...messages, message ])\n            addSystemMessage(message);\n        })\n\n        socket.on(\"receive_chat_message\", (data) =>{\n            addUserMessage(data)\n        })\n      \n        socket.on(\"user_connected\", (name) =>{\n            addSystemMessage(`${name} has joined the party`)\n        })\n      \n        return () => {\n            socket.off('recieve_message');\n            socket.off('system_message');\n            socket.off('user_connected');\n        }\n\n    },[socket])\n\n\n\n\n    const conversationProps = {\n        showChat, setShowChat,\n        messages, setMessages,\n        userMessage, setUserMessage,\n        emitMessage, addUserMessage,\n        addSystemMessage, inputRef,\n        getUserInput\n        //socket\n    };\n\n    return (\n        <ConversationPropsContext.Provider value={{conversationProps}}>\n            {children}\n        </ConversationPropsContext.Provider>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}